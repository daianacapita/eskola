<!doctype html>
{% extends "base.html" %}

{% block title %}Turmas{% endblock %}

{% block header %}
  <h1>Gerenciar Turmas</h1>
{% endblock %}

{% block content %}
  <a href="{{ url_for('admin.criar_turma') }}">Criar Nova Turma</a>
  <input id="turmas-filter" class="table-filter" type="text" placeholder="Filtrar turmas..." onkeyup="filterTable('turmas-filter','turmas-tabela')">
  <table id="turmas-tabela" style="width:100%;margin-top:10px">
    <thead>
      <tr>
        <th>Curso</th>
        <th>Classe</th>
        <th>Designação</th>
        <th>Ano Letivo</th>
        <th>Ações</th>
      </tr>
    </thead>
    <tbody>
      {% if cursos %}
        {% for curso in cursos %}
          {% for classe in curso['classes'] %}
            {% for turma in classe['turmas'] %}
            <tr>
              <td>{{ curso['curso_nome'] }}</td>
              <td>{{ classe['ano'] }}</td>
              <td><a href="{{ url_for('admin.turma_detalhes', id=turma['id']) }}">{{ turma['designacao'] }}</a></td>
              <td>{{ turma['ano_lectivo'] }}</td>
              <td>
                <form method="post" action="{{ url_for('admin.deletar_turma', id=turma['id']) }}" style="display:inline;">
                  <input type="submit" value="Deletar" onclick="return confirm('Tem certeza?')">
                </form>
              </td>
            </tr>
            {% endfor %}
          {% endfor %}
        {% endfor %}
      {% else %}
        <tr><td colspan="5">Nenhuma turma cadastrada.</td></tr>
      {% endif %}
    </tbody>
  </table>
{% endblock %}