{% extends 'base.html' %}
{% block content %}
<h2>Horário Semanal</h2>

<a href="{{ url_for('professor.index') }}" class="btn">Voltar para Área do Professor</a>


<h3>Grade Consolidada de Horários</h3>
<table class="grade-horario">
	<thead>
		<tr>
			<th>Tempo</th>
			{% for dia in dias_semana %}
				<th>{{ dia }}</th>
			{% endfor %}
		</tr>
	</thead>
	<tbody>
		{% for tempo in tempos %}
			<tr>
				<td>{{ tempo.label }}</td>
				{% for dia_idx in range(1,6) %}
					<td>
						{% set slots = grade[dia_idx][tempo.tempo] %}
						{% if slots and slots|length > 0 %}
							{% for slot in slots %}
								<div class="slot-prof">
									<a href="{{ url_for('professor.notas_disciplina', turma_disciplina_id=slot.td_id) }}" title="Ver notas da turma">
										{{ slot.turma }}<br><small>{{ slot.disciplina }}</small>
									</a>
									<div class="slot-info">{{ slot.curso }} ({{ slot.ano_letivo }})</div>
								</div>
							{% endfor %}
						{% else %}
							<span class="slot-vazio">—</span>
						{% endif %}
					</td>
				{% endfor %}
			</tr>
		{% endfor %}
	</tbody>
</table>

<style>
.grade-horario { border-collapse: collapse; width: 100%; margin-bottom: 1em; }
.grade-horario th, .grade-horario td { border: 1px solid #ccc; padding: 6px; text-align: center; }
.slot-prof { background: #d0f5d8; color: #1a5c2e; font-weight: bold; border-radius: 4px; padding: 2px 6px; margin-bottom: 2px; display: inline-block; min-width: 80px; }
.slot-prof a { color: #1a5c2e; text-decoration: none; }
.slot-prof a:hover { text-decoration: underline; }
.slot-info { font-size: 0.8em; color: #555; }
.slot-vazio { color: #bbb; }
.btn { display: inline-block; margin: 10px 0; padding: 6px 16px; background: #eee; border-radius: 4px; text-decoration: none; color: #333; border: 1px solid #ccc; }
.btn:hover { background: #e0e0e0; }
</style>
{% if not grade %}
	<p>Você não possui docências ativas.</p>
{% endif %}

<style>
.grade-horario { border-collapse: collapse; width: 100%; margin-bottom: 1em; }
.grade-horario th, .grade-horario td { border: 1px solid #ccc; padding: 6px; text-align: center; }
.slot-prof { background: #d0f5d8; color: #1a5c2e; font-weight: bold; border-radius: 4px; padding: 2px 6px; }
.slot-outro { background: #f5e6d0; color: #a65c1a; border-radius: 4px; padding: 2px 6px; }
.slot-vazio { color: #bbb; }
.btn { display: inline-block; margin: 10px 0; padding: 6px 16px; background: #eee; border-radius: 4px; text-decoration: none; color: #333; border: 1px solid #ccc; }
.btn:hover { background: #e0e0e0; }
</style>
{% endblock %}
